<!-- layouts/partials/site-header.html -->
<header class="bg-secondary dark:bg-secondary-dark py-1 relative z-30">
  <div class="container mx-auto px-4 flex justify-between items-center">
    <!-- Logo Section -->
    <div class="flex-1">
      <a href="/{{ .Site.Language.Lang }}/main/"
         class="no-underline text-primary dark:text-primary-dark inline-block ml-4">
        <svg width="170" height="30" viewBox="0 0 170 30" xmlns="http://www.w3.org/2000/svg">
          <style>
            .logo-text { font-family: 'Lato', sans-serif; font-weight: bold; }
          </style>
          <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" class="logo-text" fill="currentColor" font-size="25">
            Loudly Proud
          </text>
        </svg>
      </a>
    </div>

    <!-- Right side controls -->
    <div class="flex items-center space-x-4">
      <!-- Theme Toggle -->
      {{ if .Site.Params.darkMode }}
        {{ partial "theme-toggle.html" . }}
      {{ end }}

      <!-- Language Switcher -->
      <div x-data="{ open: false }" class="relative">
        <button
          @click="open = !open"
          class="inline-flex items-center px-3 py-2 text-primary dark:text-primary-dark hover:text-accent3 dark:hover:text-accent3-dark font-medium rounded-md transition-colors duration-200"
          aria-haspopup="true"
          :aria-expanded="open"
          type="button"
        >
          <!-- Current Language -->
          <span class="font-medium">
            {{ if eq .Site.Language.Lang "ru" }}
              Русский
            {{ else if eq .Site.Language.Lang "fa" }}
              فارسی
            {{ else if eq .Site.Language.Lang "ku" }}
              کوردی
            {{ else }}
              English
            {{ end }}
          </span>
          <!-- Dropdown Arrow Icon -->
          <svg class="ml-1 w-4 h-4 transition-transform duration-200"
               :class="{ 'transform rotate-180': open }"
               fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>

        <!-- Dropdown Menu -->
        <div
          x-show="open"
          @click.away="open = false"
          class="absolute right-0 mt-2 w-48 bg-secondary dark:bg-secondary-dark rounded-lg shadow-lg overflow-hidden border border-tertiary dark:border-tertiary-dark z-50"
          x-transition:enter="transition ease-out duration-200"
          x-transition:enter-start="opacity-0 translate-y-1"
          x-transition:enter-end="opacity-100 translate-y-0"
          x-transition:leave="transition ease-in duration-150"
          x-transition:leave-start="opacity-100 translate-y-0"
          x-transition:leave-end="opacity-0 translate-y-1"
          role="menu"
          aria-label="Language selection"
        >
          <div class="py-1" role="none">
            <a href="/ru/main/"
               class="block px-4 py-2 text-primary dark:text-primary-dark hover:bg-tertiary dark:hover:bg-tertiary-dark transition-colors duration-200 {{ if eq .Site.Language.Lang "ru" }}bg-tertiary dark:bg-tertiary-dark font-medium{{ end }}"
               role="menuitem">
              Русский
            </a>
            <a href="/fa/main/"
               class="block px-4 py-2 text-primary dark:text-primary-dark hover:bg-tertiary dark:hover:bg-tertiary-dark transition-colors duration-200 {{ if eq .Site.Language.Lang "fa" }}bg-tertiary dark:bg-tertiary-dark font-medium{{ end }}"
               role="menuitem">
              فارسی
            </a>
            <a href="/ku/main/"
               class="block px-4 py-2 text-primary dark:text-primary-dark hover:bg-tertiary dark:hover:bg-tertiary-dark transition-colors duration-200 {{ if eq .Site.Language.Lang "ku" }}bg-tertiary dark:bg-tertiary-dark font-medium{{ end }}"
               role="menuitem">
              کوردی
            </a>
            <div class="border-t border-tertiary dark:border-tertiary-dark my-1"></div>
            <a href="/en/main/"
               class="block px-4 py-2 text-primary dark:text-primary-dark hover:bg-tertiary dark:hover:bg-tertiary-dark transition-colors duration-200 {{ if eq .Site.Language.Lang "en" }}bg-tertiary dark:bg-tertiary-dark font-medium{{ end }}"
               role="menuitem">
              English
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>
